---
description: Contexto del proyecto Capia 3D
alwaysApply: true
---

## What is this project?

- Este es un proyecto de una tienda virtual en la que vendo artículos 3D diseñados e impresos por mí mismo.
- También ofrezco servicios de diseño 3D con figuras personalizadas.

## Technology
- El sitio está publicado en GitHub Pages; con solo hacer push a la rama main se despliega automáticamente.

## Colecciones
- Enfoque: páginas dedicadas por colección (no genérico). Cada colección tiene su propio `.jsx` bajo `src/collections/` con contenido y maquetación a medida.
- Routing: hash simple gestionado en `src/Shop3D.jsx`.
  - Ejemplo actual: `#parkside` renderiza `src/collections/Parkside.jsx`.
- Home: la sección "Colecciones" muestra tarjetas manuales que enlazan a `#<id>` de cada colección.
- Datos: cada página de colección define internamente su lista de `products` y utiliza `ProductCard`.
- Carrito/checkout: `Shop3D.jsx` pasa `onAdd` a la página de colección; mantener la firma del componente: `export default function Nombre({ onAdd })`.
- Assets: imágenes en `public/products/`; usar `import.meta.env.BASE_URL` para rutas de imágenes.

### Añadir una nueva colección
1. Crear `src/collections/<Id>.jsx` con un componente por defecto que reciba `onAdd`, defina su array `products` y renderice `ProductCard`.

### Convenciones
- `id` de colección en minúsculas, sin espacios (usar guiones si hace falta). El hash debe coincidir con el `slug` (`#<slug>`).
- Mantener coherencia visual con el resto del sitio (tipografías, botones, badges).


## Detalles de producto (Product Detail)
- Identidad: los productos usan `slug` único.
- Datos: centralizados en `src/data/products.js`.
- Routing: hash simple `#p/<slug>` gestionado en `src/Shop3D.jsx`.
  - Si el hash empieza por `#p/`, se establece `currentProductSlug` y se renderiza la página de detalle.
  - Se desactiva la colección activa al entrar a un producto.
- Página de detalle: `src/components/ProductDetail.jsx`.
- Enlace desde tarjetas: `src/components/ProductCard.jsx` añade “Ver detalles” a `#p/${product.slug}`. También permite añadir al carrito directamente.

### Añadir un producto al catálogo
1. Editar `src/data/products.js` y añadir un objeto con un `slug` unico.

## Google Analytics (GA4)

### Qué usamos
- GA4 con `gtag.js` cargado en `index.html`.
- Page views manuales para SPA con rutas por hash.

### Dónde está y cómo se configura
- `index.html`: incluye el script de GA4 con Measurement ID. Cambiar `G-86JXT84TKQ` si fuese necesario.
- `src/lib/utils.js`:
  - `initHashPageviewTracking()`: envía `page_view` en la carga inicial y en `hashchange`.
  - `trackPageViewGA4(path?)`: helper para enviar page_view.
  - `trackEventGA4(eventName, params)`: helper genérico para eventos.
- `src/main.jsx`: llama a `initHashPageviewTracking()` al iniciar la app.

### Qué se envía
- `page_view` con parámetros: `page_title`, `page_location`, `page_path` (incluye `/#taller`, `/#magic`, `/#p/<slug>`, etc.).
- Eventos personalizados